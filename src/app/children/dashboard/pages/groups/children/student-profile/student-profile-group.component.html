<div class="global-container">
    <app-sidebar/>

    <div class="second-container">
        <app-loading [isLoading]="isLoading"></app-loading>

        <div *ngIf="!isLoading">
            <div class="header-2">
                <div class="second-header">
                    <p class="desktop-headline-4">Профиль</p>
                </div>

                <button (click)="openModal()" class="tertiary-button-icon icon-edit">
                    <img alt="Редактировать" height="22" ngSrc="assets/edit-05.svg" width="22">
                </button>
            </div>

            <div class="desktop-headline-5 fullName">
                {{ infoUser?.userInfo?.fullName }} {{ kyu }}
            </div>

            <div class="desktop-headline-5 balance">
                <p class="desktop-headline-6 curr-balance">Текущий баланс:</p>
                <p [style.color]="getColorForBalance(infoUser!.studentInfo!.balance)">{{ infoUser?.studentInfo?.balance + " ₽" }}</p>
            </div>

            <div class="grid-info">
                <div class="info">
                    <div class="desktop-headline-6 headline">Личные данные</div>

                    <div class="info-container">
                        <p class="desktop-body-2 info-headline">Пол</p>
                        <p class="desktop-body-1">{{ getGender(infoUser!.userInfo!.gender) }}</p>
                    </div>

                    <div class="info-container">
                        <p class="desktop-body-2 info-headline">Дата рождения</p>
                        <p class="desktop-body-1">{{ _formatter.formatBirthDate(infoUser!.studentInfo!.birthDate) }}</p>
                    </div>

                    <div class="info-container">
                        <p class="desktop-body-2 info-headline">Возраст</p>
                        <p class="desktop-body-1">{{ infoUser?.studentInfo?.age }}</p>
                    </div>

                    <div class="info-container">
                        <p class="desktop-body-2 info-headline">Класс</p>
                        <p class="desktop-body-1">{{ infoUser?.studentInfo?.schoolGrade }}</p>
                    </div>

                    <div class="info-container">
                        <p class="desktop-body-2 info-headline">Адрес</p>
                        <p class="desktop-body-1">{{ infoUser?.studentInfo?.address }}</p>
                    </div>

                    <div class="info-container contacts">
                        <p class="desktop-body-2 info-headline">Контакт 1</p>
                        <div class="desktop-body-1">
                            <p>{{ _formatter.formatPhoneNumber(infoUser!.studentInfo!.contacts[0]!.phone) }}</p>
                            <p class="desktop-body-2">{{ infoUser!.studentInfo!.contacts[0]!.relation }}
                                · {{ infoUser!.studentInfo!.contacts[0]!.name }}</p>
                        </div>
                    </div>

                    <div *ngIf="infoUser!.studentInfo!.contacts[1]" class="info-container contacts">
                        <p class="desktop-body-2 info-headline">Контакт 2</p>
                        <div class="desktop-body-1">
                            <p>{{ _formatter.formatPhoneNumber(infoUser!.studentInfo!.contacts[1]!.phone) || '-' }}</p>
                            <p class="desktop-body-2">{{ infoUser!.studentInfo!.contacts[1]!.relation || '-' }}
                                · {{ infoUser!.studentInfo!.contacts[1]!.name || '-' }}</p>
                        </div>
                    </div>
                </div>

                <div class="info">
                    <div class="desktop-headline-6 headline">Данные для входа</div>

                    <div class="info-container">
                        <p class="desktop-body-2 info-headline">Логин</p>
                        <p class="desktop-body-1">{{ infoUser?.credentials?.login }}</p>
                    </div>

                    <div class="info-container">
                        <p class="desktop-body-2 info-headline">Пароль</p>
                        <p class="desktop-body-1">{{ infoUser?.credentials?.password }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<app-update-student-info
    (close)="closeModal()"
    [infoUser]="infoUser"
    [isVisible]="isVisible"
    [username]="username"
>
</app-update-student-info>
